YUI.add("moodle-availability_quizquestion-form",function(u,e){M.availability_quizquestion=M.availability_quizquestion||{},M.availability_quizquestion.form=u.Object(M.core_availability.plugin),M.availability_quizquestion.form.quizzes=null,M.availability_quizquestion.form.states=null,M.availability_quizquestion.form.initInner=function(e,i){this.quizzes=e,this.states=i},M.availability_quizquestion.form.getNode=function(e){var i,t,a,l,s='<span class="availability-group">';for(s+='<label><span class="p-r-1">'+M.util.get_string("title","availability_quizquestion")+'</span> <select name="quizid" class="custom-select"><option value="">'+M.util.get_string("choosedots","moodle")+"</option>",i=0;i<this.quizzes.length;i++)s+='<option value="'+this.quizzes[i].id+'">'+this.quizzes[i].name+"</option>";for(s+="</select></label>",s+=' <label><span class="sr-only">'+M.util.get_string("label_question","availability_quizquestion")+'</span><select name="questionid" class="custom-select"><option value="">'+M.util.get_string("choosedots","moodle")+"</option>",s+="</select></label>",s+=' <lebel><span class="sr-only">'+M.util.get_string("label_state","availability_quizquestion")+'</span><select name="requiredstate" title="'+M.util.get_string("label_operator","availability_profile")+'" class="custom-select"><option value="">'+M.util.get_string("choosedots","moodle")+"</option>",i=0;i<this.states.length;i++)s+='<option value="'+this.states[i].shortname+'">'+this.states[i].displayname+"</option>";return s+="</select></label>",s+="</span>",t=u.Node.create('<span class="form-inline">'+s+"</span>"),a=function(s,n,o){var e=s.get("value"),i=M.cfg.wwwroot+"/availability/condition/quizquestion/ajax.php?quizid="+e;n.all("option").each(function(e){""!=e.get("value")&&e.remove()},this),e&&(s.set("disabled",!0),u.io(i,{on:{success:function(e,i){var t,a,l=u.JSON.parse(i.responseText);for(t in l)(a=document.createElement("option")).value=l[t].id,a.innerHTML=l[t].name,n.append(a);s.set("disabled",!1),o!==undefined&&o(),M.core_availability.form.update()},failure:function(){window.alert(M.util.get_string("ajaxerror","availability_quizquestion")),s.set("disabled",!1)}}}))},e.quizid!==undefined&&t.one("select[name=quizid] > option[value="+e.quizid+"]")&&(t.one("select[name=quizid]").set("value",""+e.quizid),a(t.one("select[name=quizid]"),t.one("select[name=questionid]"),function(){e.questionid!==undefined&&t.one("select[name=questionid] > option[value="+e.questionid+"]")&&t.one("select[name=questionid]").set("value",""+e.questionid)})),e.requiredstate!==undefined&&t.one("select[name=requiredstate] > option[value="+e.requiredstate+"]")&&t.one("select[name=requiredstate]").set("value",""+e.requiredstate),M.availability_quizquestion.form.addedEvents||(M.availability_quizquestion.form.addedEvents=!0,(l=u.one(".availability-field")).delegate("change",function(){M.core_availability.form.update()},".availability_quizquestion select"),l.delegate("change",function(){var e=this.ancestor("span.availability_quizquestion"),i=e.one("select[name=quizid]"),t=e.one("select[name=questionid]");a(i,t)},".availability_quizquestion select[name=quizid]")),t},M.availability_quizquestion.form.fillValue=function(e,i){var t=i.one("select[name=quizid]").get("value"),a=i.one("select[name=questionid]").get("value"),l=i.one("select[name=requiredstate]").get("value");e.quizid=""===t?"":parseInt(t,10),e.questionid=""===a?"":parseInt(a,10),e.requiredstate=l},M.availability_quizquestion.form.fillErrors=function(e,i){var t={};this.fillValue(t,i),""===t.quizid&&e.push("availability_quizquestion:error_selectquiz"),""===t.questionid&&e.push("availability_quizquestion:error_selectquestion"),""===t.requiredstate&&e.push("availability_quizquestion:error_selectstate")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});